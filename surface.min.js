var ProteinSurface=function(e){var t=this;return t.boxLength=128,t.probeRadius=1.4,t.scaleFactor=1,t.rasrad=[1.9,1.88,1.63,1.48,1.78,1.2,1.87,1.96,1.63,.74,1.8,1.48,1.2],t.depty=new Array(13),t.widxz=new Array(13),t.fixsf=2,t.nb=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1],[1,1,0],[1,-1,0],[-1,1,0],[-1,-1,0],[1,0,1],[1,0,-1],[-1,0,1],[-1,0,-1],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[1,1,1],[1,1,-1],[1,-1,1],[-1,1,1],[1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,-1,-1]],t.Vector3=function(e,i,t){this.x=e,this.y=i,this.z=t},t.Face3=function(e,i,t){this.a=e,this.b=i,this.c=t},this.initparm=function(e,i,r){var n=2.5;t.pminx=e.x,t.pmaxx=i.x,t.pminy=e.y,t.pmaxy=i.y,t.pminz=e.z,t.pmaxz=i.z,r?(t.pminx-=n,t.pminy-=n,t.pminz-=n,t.pmaxx+=n,t.pmaxy+=n,t.pmaxz+=n):(t.pminx-=t.probeRadius+n,t.pminy-=t.probeRadius+n,t.pminz-=t.probeRadius+n,t.pmaxx+=t.probeRadius+n,t.pmaxy+=t.probeRadius+n,t.pmaxz+=t.probeRadius+n),t.ptranx=-t.pminx,t.ptrany=-t.pminy,t.ptranz=-t.pminz,t.scaleFactor=t.pmaxx-t.pminx,t.pmaxy-t.pminy>t.scaleFactor&&(t.scaleFactor=t.pmaxy-t.pminy),t.pmaxz-t.pminz>t.scaleFactor&&(t.scaleFactor=t.pmaxz-t.pminz),t.scaleFactor=(t.boxLength-1)/t.scaleFactor,t.boxLength=Math.floor(t.boxLength*t.fixsf/t.scaleFactor),t.scaleFactor=t.fixsf;var a=180;t.boxLength>a&&(sfthresh=a/t.boxLength,t.boxLength=Math.floor(a),t.scaleFactor=t.scaleFactor*sfthresh),t.pLength=Math.ceil(t.scaleFactor*(t.pmaxx-t.pminx))+1,t.pWidth=Math.ceil(t.scaleFactor*(t.pmaxy-t.pminy))+1,t.pHeight=Math.ceil(t.scaleFactor*(t.pmaxz-t.pminz))+1,t.pLength>t.boxLength&&(t.pLength=t.boxLength),t.pWidth>t.boxLength&&(t.pWidth=t.boxLength),t.pHeight>t.boxLength&&(t.pHeight=t.boxLength),this.boundingatom(r),cutRadis=t.probeRadius*t.scaleFactor,t.vp=new Array(t.pLength*t.pWidth*t.pHeight)},this.boundingatom=function(e){for(var i,r,n,a=new Array(13),s=0;13>s;++s)for(e?a[s]=(t.rasrad[s]+t.probeRadius)*t.scaleFactor+.5:a[s]=t.rasrad[s]*t.scaleFactor+.5,n=a[s]*a[s],t.widxz[s]=Math.floor(a[s])+1,t.depty[s]=new Array(t.widxz[s]*t.widxz[s]),indx=0,j=0;j<t.widxz[s];++j)for(k=0;k<t.widxz[s];++k)i=j*j+k*k,i>n?t.depty[s][indx]=-1:(r=Math.sqrt(n-i),t.depty[s][indx]=Math.floor(r)),indx++},this.fillvoxels=function(e){for(var i=0,r=t.vp.length;r>i;++i)t.vp[i]={inout:!1,isdone:!1,isbound:!1,distance:-1,atomid:-1};for(i in e)this.fillAtom(e[i],e);for(i=0,r=t.vp.length;r>i;++i)t.vp[i].inout&&(t.vp[i].isdone=!0);for(var i=0,r=t.vp.length;r>i;++i)t.vp[i].inout&&(t.vp[i].isdone=!0)},this.fillAtom=function(e,r){var n,a,s,p,o,v;n=Math.floor(.5+t.scaleFactor*(e.coord.x+t.ptranx)),a=Math.floor(.5+t.scaleFactor*(e.coord.y+t.ptrany)),s=Math.floor(.5+t.scaleFactor*(e.coord.z+t.ptranz));var h=this.getAtomType(e),f=0;for(i=0;i<t.widxz[h];++i)for(j=0;j<t.widxz[h];++j){if(-1!=t.depty[h][f])for(ii=-1;ii<2;++ii)for(jj=-1;jj<2;++jj)for(kk=-1;kk<2;++kk)if(0!=ii&&0!=jj&&0!=kk)for(mi=ii*i,mk=kk*j,k=0;k<=t.depty[h][f];++k)if(mj=k*jj,si=n+mi,sj=a+mj,sk=s+mk,!(si<0||sj<0||sk<0||si>=t.pLength||sj>=t.pWidth||sk>=t.pHeight)){var c=t.vp[si*t.pWidth*t.pHeight+sj*t.pHeight+sk];if(0==c.inout)c.inout=!0,c.atomid=e.serial;else if(c.inout){var u=r[c.atomid];p=Math.floor(.5+t.scaleFactor*(u.coord.x+t.ptranx)),o=Math.floor(.5+t.scaleFactor*(u.coord.y+t.ptrany)),v=Math.floor(.5+t.scaleFactor*(u.coord.z+t.ptranz)),mi*mi+mj*mj+mk*mk<p*p+o*o+v*v&&(c.atomid=e.serial)}}f++}},this.fillvoxelswaals=function(e){for(var i=0,r=t.vp.length;r>i;++i)t.vp[i].isdone=!1;for(i in e)this.fillAtomWaals(e[i],e)},this.fillAtomWaals=function(e,r){var n,a,s,p,o,v,h=0;n=Math.floor(.5+t.scaleFactor*(e.coord.x+t.ptranx)),a=Math.floor(.5+t.scaleFactor*(e.coord.y+t.ptrany)),s=Math.floor(.5+t.scaleFactor*(e.coord.z+t.ptranz));var f=this.getAtomType(e);for(i=0;i<t.widxz[f];++i)for(j=0;j<t.widxz[f];++j){if(-1!=t.depty[f][h])for(ii=-1;ii<2;++ii)for(jj=-1;jj<2;++jj)for(kk=-1;kk<2;++kk)if(0!=ii&&0!=jj&&0!=kk)for(mi=ii*i,mk=kk*j,k=0;k<=t.depty[f][h];++k)if(mj=k*jj,si=n+mi,sj=a+mj,sk=s+mk,!(si<0||sj<0||sk<0)){var c=t.vp[si*t.pWidth*t.pHeight+sj*t.pHeight+sk];if(void 0!=c&&0==c.isdone)c.isdone=!0,c.atomid=e.serial;else if(void 0!=c&&c.isdone){var u=r[c.atomid];p=Math.floor(.5+t.scaleFactor*(u.coord.x+t.ptranx)),o=Math.floor(.5+t.scaleFactor*(u.coord.y+t.ptrany)),v=Math.floor(.5+t.scaleFactor*(u.coord.z+t.ptranz)),mi*mi+mj*mj+mk*mk<p*p+o*o+v*v&&(c.atomid=e.serial)}}h++}},this.getAtomType=function(e){var i=10;return"CA"==e.name?i=0:"C"==e.name?i=1:"C"==e.elem?i=7:"0"==e.name?i=3:"O"==e.elem?i=11:"N"==e.name?i=2:"N"==e.elem?i=8:"S"==e.elem?i=4:"P"==e.elem?i=6:"FE"==e.name?i=9:"H"==e.name?i=5:"H"==e.elem&&(i=12),i},this.buildboundary=function(){for(i=0;i<t.pLength;++i)for(j=0;j<t.pHeight;++j)for(k=0;k<t.pWidth;++k){var e=t.vp[i*t.pWidth*t.pHeight+k*t.pHeight+j];if(e.inout)for(var r=!1,n=0;!r&&26>n;){var a=i+t.nb[n][0],s=j+t.nb[n][2],p=k+t.nb[n][1];a>-1&&a<t.pLength&&p>-1&&p<t.pWidth&&s>-1&&s<t.pHeight&&!t.vp[a*t.pWidth*t.pHeight+p*t.pHeight+s].inout?(e.isbound=!0,r=!0):n++}}},this.fastdistancemap=function(){var e,i;totalsurfacevox=0,totalinnervox=0;for(var r=new Array(t.pLength),n=0;n<t.pLength;++n){for(var a=new Array(t.pWidth),s=0;s<t.pWidth;++s){for(var p=new Array(t.pHeight),o=0;o<t.pHeight;++o)p[o]={ix:0,iy:0,iz:0};a[s]=p}r[n]=a}for(n=0;n<t.pLength;++n)for(s=0;s<t.pWidth;++s)for(o=0;o<t.pHeight;++o){var v=t.vp[n*t.pWidth*t.pHeight+s*t.pHeight+o];v.isdone=!1,v.inout&&(v.isbound?(totalsurfacevox++,r[n][s][o].ix=n,r[n][s][o].iy=s,r[n][s][o].iz=o,v.distance=0,v.isdone=!0):totalinnervox++)}inarray=new Array,outarray=new Array;var e=0,i=0;for(n=0;n<t.pLength;++n)for(s=0;s<t.pWidth;++s)for(o=0;o<t.pHeight;++o){var v=t.vp[n*t.pWidth*t.pHeight+s*t.pHeight+o];v.isbound&&(inarray.push({ix:n,iy:s,iz:o}),e++,v.isbound=!1)}do for(i=this.fastoneshell(e,r),e=0,inarray=[],n=0;i>n;++n){var h=t.vp[t.pWidth*t.pHeight*outarray[n].ix+t.pHeight*outarray[n].iy+outarray[n].iz];h.isbound=!1,h.distance<=1.02*cutRadis&&(inarray.push({ix:outarray[n].ix,iy:outarray[n].iy,iz:outarray[n].iz}),e++)}while(0!=e);var f=t.scaleFactor-.5;for(0>f&&(f=0),n=0;n<t.pLength;++n)for(s=0;s<t.pWidth;++s)for(o=0;o<t.pHeight;++o){var v=t.vp[n*t.pWidth*t.pHeight+s*t.pHeight+o];v.isbound=!1,v.inout&&(!v.isdone||v.isdone&&v.distance>=cutRadis-.5/(.1+f))&&(v.isbound=!0)}inarray=[],outarray=[]},this.fastoneshell=function(e,i){var r,n,a,s,p,o,v,h=0;if(0==e)return 0;outarray=[],tnv={ix:-1,iy:-1,iz:-1};for(var f=0;e>f;++f){r=inarray[f].ix,n=inarray[f].iy,a=inarray[f].iz;for(var c=0;6>c;++c){tnv.ix=r+t.nb[c][0],tnv.iy=n+t.nb[c][1],tnv.iz=a+t.nb[c][2];var u=t.vp[tnv.ix*t.pWidth*t.pHeight+t.pHeight*tnv.iy+tnv.iz];if(tnv.ix<t.pLength&&tnv.ix>-1&&tnv.iy<t.pWidth&&tnv.iy>-1&&tnv.iz<t.pHeight&&tnv.iz>-1&&u.inout&&!u.isdone){i[tnv.ix][tnv.iy][a+t.nb[c][2]].ix=i[r][n][a].ix,i[tnv.ix][tnv.iy][a+t.nb[c][2]].iy=i[r][n][a].iy,i[tnv.ix][tnv.iy][a+t.nb[c][2]].iz=i[r][n][a].iz,s=tnv.ix-i[r][n][a].ix,p=tnv.iy-i[r][n][a].iy,o=tnv.iz-i[r][n][a].iz;var v=s*s+p*p+o*o;u.distance=Math.sqrt(v),u.isdone=!0,u.isbound=!0,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz}),h++}else tnv.ix<t.pLength&&tnv.ix>-1&&tnv.iy<t.pWidth&&tnv.iy>-1&&tnv.iz<t.pHeight&&tnv.iz>-1&&u.inout&&u.isdone&&(s=tnv.ix-i[r][n][a].ix,p=tnv.iy-i[r][n][a].iy,o=tnv.iz-i[r][n][a].iz,v=s*s+p*p+o*o,v=Math.sqrt(v),v<u.distance&&(i[tnv.ix][tnv.iy][tnv.iz].ix=i[r][n][a].ix,i[tnv.ix][tnv.iy][tnv.iz].iy=i[r][n][a].iy,i[tnv.ix][tnv.iy][tnv.iz].iz=i[r][n][a].iz,u.distance=v,u.isbound||(u.isbound=!0,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz}),h++)))}}for(f=0;e>f;++f)for(r=inarray[f].ix,n=inarray[f].iy,a=inarray[f].iz,c=6;18>c;++c){tnv.ix=r+t.nb[c][0],tnv.iy=n+t.nb[c][1],tnv.iz=a+t.nb[c][2];var u=t.vp[tnv.ix*t.pWidth*t.pHeight+t.pHeight*tnv.iy+tnv.iz];tnv.ix<t.pLength&&tnv.ix>-1&&tnv.iy<t.pWidth&&tnv.iy>-1&&tnv.iz<t.pHeight&&tnv.iz>-1&&u.inout&&!u.isdone?(i[tnv.ix][tnv.iy][a+t.nb[c][2]].ix=i[r][n][a].ix,i[tnv.ix][tnv.iy][a+t.nb[c][2]].iy=i[r][n][a].iy,i[tnv.ix][tnv.iy][a+t.nb[c][2]].iz=i[r][n][a].iz,s=tnv.ix-i[r][n][a].ix,p=tnv.iy-i[r][n][a].iy,o=tnv.iz-i[r][n][a].iz,v=s*s+p*p+o*o,u.distance=Math.sqrt(v),u.isdone=!0,u.isbound=!0,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz}),h++):tnv.ix<t.pLength&&tnv.ix>-1&&tnv.iy<t.pWidth&&tnv.iy>-1&&tnv.iz<t.pHeight&&tnv.iz>-1&&u.inout&&u.isdone&&(s=tnv.ix-i[r][n][a].ix,p=tnv.iy-i[r][n][a].iy,o=tnv.iz-i[r][n][a].iz,v=Math.sqrt(s*s+p*p+o*o),v<u.distance&&(i[tnv.ix][tnv.iy][tnv.iz].ix=i[r][n][a].ix,i[tnv.ix][tnv.iy][tnv.iz].iy=i[r][n][a].iy,i[tnv.ix][tnv.iy][tnv.iz].iz=i[r][n][a].iz,u.distance=v,u.isbound||(u.isbound=!0,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz}),h++)))}for(f=0;e>f;++f)for(r=inarray[f].ix,n=inarray[f].iy,a=inarray[f].iz,c=18;26>c;++c){tnv.ix=r+t.nb[c][0],tnv.iy=n+t.nb[c][1],tnv.iz=a+t.nb[c][2];var u=t.vp[tnv.ix*t.pWidth*t.pHeight+t.pHeight*tnv.iy+tnv.iz];tnv.ix<t.pLength&&tnv.ix>-1&&tnv.iy<t.pWidth&&tnv.iy>-1&&tnv.iz<t.pHeight&&tnv.iz>-1&&u.inout&&!u.isdone?(i[tnv.ix][tnv.iy][a+t.nb[c][2]].ix=i[r][n][a].ix,i[tnv.ix][tnv.iy][a+t.nb[c][2]].iy=i[r][n][a].iy,i[tnv.ix][tnv.iy][a+t.nb[c][2]].iz=i[r][n][a].iz,s=tnv.ix-i[r][n][a].ix,p=tnv.iy-i[r][n][a].iy,o=tnv.iz-i[r][n][a].iz,v=s*s+p*p+o*o,u.distance=Math.sqrt(v),u.isdone=!0,u.isbound=!0,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz}),h++):tnv.ix<t.pLength&&tnv.ix>-1&&tnv.iy<t.pWidth&&tnv.iy>-1&&tnv.iz<t.pHeight&&tnv.iz>-1&&u.inout&&u.isdone&&(s=tnv.ix-i[r][n][a].ix,p=tnv.iy-i[r][n][a].iy,o=tnv.iz-i[r][n][a].iz,v=Math.sqrt(s*s+p*p+o*o),v<u.distance&&(i[tnv.ix][tnv.iy][tnv.iz].ix=i[r][n][a].ix,i[tnv.ix][tnv.iy][tnv.iz].iy=i[r][n][a].iy,i[tnv.ix][tnv.iy][tnv.iz].iz=i[r][n][a].iz,u.distance=v,u.isbound||(u.isbound=!0,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz}),h++)))}return h},this.marchingcube=function(e){for(var i=0,r=t.vp.length;r>i;++i)1==e?t.vp[i].isbound=!1:4==e?(t.vp[i].isdone=!1,t.vp[i].isbound&&(t.vp[i].isdone=!0),t.vp[i].isbound=!1):2==e?t.vp[i].isbound&&t.vp[i].isdone?t.vp[i].isbound=!1:t.vp[i].isbound&&!t.vp[i].isdone&&(t.vp[i].isdone=!0):3==e&&(t.vp[i].isbound=!1);for(var n=new Array(t.pLength),i=0;i<t.pLength;++i){for(var a=new Array(t.pWidth),s=0;s<t.pWidth;++s){for(var p=new Array(t.pHeight),o=0;o<t.pHeight;++o)p[o]=-1;a[s]=p}n[i]=a}t.vertnumber=0,t.facenumber=0,t.verts=new Array,t.faces=new Array;for(var v,h,f,c,u=new Array(6),i=0;6>i;++i)u[i]=new Array(3);for(i=0;1>i;++i)for(s=0;s<t.pWidth-1;++s)for(o=0;o<t.pHeight-1;++o){var d=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o].isdone,m=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o+1].isdone,b=t.vp[t.pWidth*t.pHeight*i+t.pHeight*(s+1)+o].isdone,y=t.vp[t.pWidth*t.pHeight*i+t.pHeight*(s+1)+o+1].isdone,x=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o].isdone,g=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o+1].isdone,l=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*(s+1)+o].isdone,z=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*(s+1)+o+1].isdone;if(d&&b&&y&&m){for(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1,h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[1][0]][u[1][1]][u[1][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[3][0]][u[3][1]][u[3][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}else if(d&&b&&y||b&&y&&m||y&&m&&d||m&&d&&b){for(d&&b&&y?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1):b&&y&&m?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):y&&m&&d?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o):m&&d&&b&&(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[1][0]][u[1][1]][u[1][2]])),t.facenumber++}}for(i=0;i<t.pLength-1;++i)for(s=0;1>s;++s)for(o=0;o<t.pHeight-1;++o){var d=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o].isdone,m=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o+1].isdone,x=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o].isdone,g=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o+1].isdone;if(d&&x&&g&&m){for(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1,h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}else if(d&&x&&g||x&&g&&m||g&&m&&d||m&&d&&x){for(d&&x&&g?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):x&&g&&m?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):g&&m&&d?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o):m&&d&&x&&(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}}for(i=0;i<t.pLength-1;++i)for(s=0;s<t.pWidth-1;++s)for(o=0;1>o;++o){var d=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o].isdone,b=t.vp[t.pWidth*t.pHeight*i+t.pHeight*(s+1)+o].isdone,x=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o].isdone,l=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*(s+1)+o].isdone;if(d&&x&&l&&b){for(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o,h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[1][0]][u[1][1]][u[1][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[3][0]][u[3][1]][u[3][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}else if(d&&x&&l||x&&l&&b||l&&b&&d||b&&d&&x){for(d&&x&&l?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):x&&l&&b?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):l&&b&&d?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o):b&&d&&x&&(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[1][0]][u[1][1]][u[1][2]])),t.facenumber++}}for(i=t.pLength-1;i<t.pLength;++i)for(s=0;s<t.pWidth-1;++s)for(o=0;o<t.pHeight-1;++o){var d=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o].isdone,m=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o+1].isdone,b=t.vp[t.pWidth*t.pHeight*i+t.pHeight*(s+1)+o].isdone,y=t.vp[t.pWidth*t.pHeight*i+t.pHeight*(s+1)+o+1].isdone;if(d&&b&&y&&m){for(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1,h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}else if(d&&b&&y||b&&y&&m||y&&m&&d||m&&d&&b){for(d&&b&&y?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1):b&&y&&m?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):y&&m&&d?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o):m&&d&&b&&(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}}for(i=0;i<t.pLength-1;++i)for(s=t.pWidth-1;s<t.pWidth;++s)for(o=0;o<t.pHeight-1;++o){var d=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o].isdone,m=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o+1].isdone,x=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o].isdone,g=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o+1].isdone;if(d&&x&&g&&m){for(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1,h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[1][0]][u[1][1]][u[1][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[3][0]][u[3][1]][u[3][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}else if(d&&x&&g||x&&g&&m||g&&m&&d||m&&d&&x){for(d&&x&&g?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):x&&g&&m?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):g&&m&&d?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o):m&&d&&x&&(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[1][0]][u[1][1]][u[1][2]])),t.facenumber++}}for(i=0;i<t.pLength-1;++i)for(s=0;s<t.pWidth-1;++s)for(o=t.pHeight-1;o<t.pHeight;++o){var d=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o].isdone,b=t.vp[t.pWidth*t.pHeight*i+t.pHeight*(s+1)+o].isdone,x=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o].isdone,l=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*(s+1)+o].isdone;if(d&&x&&l&&b){for(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o,h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}else if(d&&x&&l||x&&l&&b||l&&b&&d||b&&d&&x){for(d&&x&&l?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):x&&l&&b?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):l&&b&&d?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o):b&&d&&x&&(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}}for(i=0;i<t.pLength-1;++i)for(s=0;s<t.pWidth-1;++s)for(o=0;o<t.pHeight-1;++o){var d=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o].isdone,m=t.vp[t.pWidth*t.pHeight*i+t.pHeight*s+o+1].isdone,b=t.vp[t.pWidth*t.pHeight*i+t.pHeight*(s+1)+o].isdone,y=t.vp[t.pWidth*t.pHeight*i+t.pHeight*(s+1)+o+1].isdone,x=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o].isdone,g=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*s+o+1].isdone,l=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*(s+1)+o].isdone,z=t.vp[t.pWidth*t.pHeight*(i+1)+t.pHeight*(s+1)+o+1].isdone,v=0;for(h=0;2>h;++h)for(f=0;2>f;++f)for(c=0;2>c;++c)t.vp[t.pWidth*t.pHeight*(i+h)+t.pHeight*(s+f)+o+c].isdone&&v++;if(3==v){if(d&&x&&l||d&&b&&l||b&&x&&l||d&&b&&x||m&&g&&z||m&&y&&z||y&&g&&z||m&&y&&g||d&&x&&g||x&&g&&m||d&&g&&m||d&&x&&m||l&&x&&z||l&&g&&z||x&&g&&z||l&&x&&g||l&&b&&y||b&&y&&z||l&&y&&z||l&&b&&z||d&&b&&m||d&&m&&y||m&&b&&y||d&&b&&y){for(d&&x&&l?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):d&&b&&l?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o):b&&x&&l?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):d&&b&&x?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):m&&g&&z?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):m&&y&&z?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1):y&&g&&z?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):m&&y&&g?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1):d&&x&&g?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o):x&&g&&m?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):d&&g&&m?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):d&&x&&m?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):l&&x&&z?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):l&&g&&z?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):x&&g&&z?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1):l&&x&&g?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):l&&b&&y?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):b&&y&&z?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):l&&y&&z?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1):l&&b&&z?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1):d&&b&&m?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):d&&m&&y?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o):m&&b&&y?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):d&&b&&y&&(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}}else if(4==v){if(d&&x&&l&&b||m&&g&&z&&y||d&&x&&g&&m||l&&x&&g&&z||l&&b&&y&&z||d&&b&&m&&y){for(d&&x&&l&&b?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o):m&&g&&z&&y?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1):d&&x&&g&&m?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1):l&&x&&g&&z?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1):l&&b&&y&&z?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):d&&b&&m&&y&&(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1),h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}else if(d&&x&&l&&y||d&&b&&l&&g||b&&x&&l&&m||d&&b&&x&&z||m&&g&&z&&b||m&&y&&z&&x||y&&g&&z&&d||m&&y&&g&&l||d&&x&&g&&y||x&&g&&m&&b||d&&g&&m&&l||d&&x&&m&&z||l&&x&&z&&m||l&&g&&z&&d||x&&g&&z&&b||l&&x&&g&&y||l&&b&&y&&g||b&&y&&z&&x||l&&y&&z&&d||l&&b&&z&&m||d&&b&&m&&z||d&&m&&y&&l||m&&b&&y&&x||d&&b&&y&&g){for(d&&x&&l&&y?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):d&&b&&l&&g?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o):b&&x&&l&&m?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):d&&b&&x&&z?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):m&&g&&z&&b?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):m&&y&&z&&x?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1):y&&g&&z&&d?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):m&&y&&g&&l?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1):d&&x&&g&&y?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o):x&&g&&m&&b?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):d&&g&&m&&l?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):d&&x&&m&&z?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):l&&x&&z&&m?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):l&&g&&z&&d?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):x&&g&&z&&b?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1):l&&x&&g&&y?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):l&&b&&y&&g?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):b&&y&&z&&x?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):l&&y&&z&&d?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1):l&&b&&z&&m?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1):d&&b&&m&&z?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):d&&m&&y&&l?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o):m&&b&&y&&x?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1):d&&b&&y&&g&&(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}else if(d&&y&&l&&b||d&&x&&l&&g||d&&m&&x&&b||b&&x&&l&&z||m&&y&&z&&b||m&&x&&z&&g||d&&m&&g&&y||y&&g&&l&&z){for(b&&y&&d&&l?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):x&&g&&l&&d?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o):d&&m&&x&&b?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):l&&z&&b&&x?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):b&&y&&z&&m?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1):x&&g&&z&&m?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1):d&&m&&g&&y?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1):y&&g&&l&&z&&(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}else if(d&&x&&l&&m||b&&x&&l&&g||b&&d&&l&&z||b&&d&&x&&y||y&&m&&g&&x||z&&m&&g&&l||z&&y&&g&&b||z&&y&&m&&d||l&&y&&m&&b||g&&d&&m&&b||g&&d&&z&&x||y&&l&&z&&x){for(d&&x&&l&&m?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):b&&x&&l&&g?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):b&&d&&l&&z?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1):b&&d&&x&&y?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):y&&m&&g&&x?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):z&&m&&g&&l?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):z&&y&&g&&b?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):z&&y&&m&&d?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1):l&&y&&m&&b?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):g&&d&&m&&b?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):g&&d&&z&&x?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1):y&&l&&z&&x&&(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1),h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),
t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}else if(d&&x&&b&&g||d&&x&&l&&z||b&&x&&l&&y||b&&d&&l&&m||z&&m&&g&&d||z&&y&&g&&x||z&&y&&m&&l||g&&y&&m&&b||z&&y&&d&&b||x&&d&&m&&y||g&&m&&l&&x||b&&l&&z&&g){for(d&&x&&b&&g?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):d&&x&&l&&z?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1):b&&x&&l&&y?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):b&&d&&l&&m?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):z&&m&&g&&d?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1):z&&y&&g&&x?(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):z&&y&&m&&l?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):g&&y&&m&&b?(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):z&&y&&d&&b?(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o):x&&d&&m&&y?(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o):g&&m&&l&&x?(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o):b&&l&&z&&g&&(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o),h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}}else if(5==v)if((x||m||z)&&(b||m||z)&&(l||g||y)&&(d||g||y)&&(g||d||l)&&(y||d||l)&&(z||x||b)&&(m||x||b))if((d||x||l)&&(d||b||l)&&(b||x||l)&&(d||b||x)&&(m||g||z)&&(m||y||z)&&(y||g||z)&&(m||y||g)&&(d||x||g)&&(x||g||m)&&(d||g||m)&&(d||x||m)&&(l||x||z)&&(l||g||z)&&(x||g||z)&&(l||x||g)&&(l||b||y)&&(b||y||z)&&(l||y||z)&&(l||b||z)&&(d||b||m)&&(d||m||y)&&(m||b||y)&&(d||b||y))if((d||x||z)&&(b||l||m)&&(y||z||x)&&(m||g||l)&&(d||b||z)&&(g||z||b)&&(x||l||y)&&(m||y||l)&&(d||m||z)&&(l||z||d)&&(x||g||y)&&(b||y||g)){if(!((d||x||y)&&(b||l||g)&&(y||z||d)&&(m||g||b)&&(d||b||g)&&(g||z||d)&&(x||l||m)&&(m||y||x)&&(d||m||l)&&(l||z||m)&&(x||g||b)&&(b||y||x))){for(d||x||y?b||l||g?y||z||d?m||g||b?d||b||g?g||z||d?x||l||m?m||y||x?d||m||l?l||z||m?x||g||b?b||y||x||(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1,u[4][0]=i,u[4][1]=s+1,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o,u[4][0]=i,u[4][1]=s,u[4][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s+1,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o,u[4][0]=i+1,u[4][1]=s+1,u[4][2]=o):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i,u[4][1]=s+1,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i,u[4][1]=s+1,u[4][2]=o):(u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[4][0]=i+1,u[4][1]=s+1,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s+1,u[4][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o,u[4][0]=i+1,u[4][1]=s,u[4][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i,u[4][1]=s,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s+1,u[4][2]=o+1),h=0;5>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[4][0]][u[4][1]][u[4][2]],n[u[1][0]][u[1][1]][u[1][2]])),t.facenumber++}}else{for(d||x||z?b||l||m?y||z||x?m||g||l?d||b||z?g||z||b?x||l||y?m||y||l?d||m||z?l||z||d?x||g||y?b||y||g||(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s,u[4][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1,u[4][0]=i,u[4][1]=s+1,u[4][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o,u[4][0]=i,u[4][1]=s,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s+1,u[4][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o,u[4][0]=i+1,u[4][1]=s,u[4][2]=o):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i,u[4][1]=s,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i,u[4][1]=s,u[4][2]=o):(u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[4][0]=i+1,u[4][1]=s,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i,u[4][1]=s+1,u[4][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o,u[4][0]=i,u[4][1]=s,u[4][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s,u[4][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1,u[4][0]=i,u[4][1]=s+1,u[4][2]=o+1),h=0;5>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[2][0]][u[2][1]][u[2][2]],n[u[4][0]][u[4][1]][u[4][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}else{for(d||x||l?d||b||l?b||x||l?d||b||x?m||g||z?m||y||z?y||g||z?m||y||g?d||x||g?x||g||m?d||g||m?d||x||m?l||x||z?l||g||z?x||g||z?l||x||g?l||b||y?b||y||z?l||y||z?l||b||z?d||b||m?d||m||y?m||b||y?d||b||y||(u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):(u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o):(u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o):(u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):(u[2][0]=i,u[2][1]=s,u[2][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):(u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o):(u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[0][0]=i,u[0][1]=s,u[0][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o):(u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1):(u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1):(u[2][0]=i,u[2][1]=s,u[2][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o):(u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o):(u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[0][0]=i,u[0][1]=s,u[0][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):(u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):(u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o):(u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[3][0]=i,u[3][1]=s,u[3][2]=o):(u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):(u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1):(u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):(u[2][0]=i,u[2][1]=s,u[2][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):(u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[0][0]=i,u[0][1]=s,u[0][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):(u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o):(u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o):(u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o):(u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o),h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}else{for(x||m||z?b||m||z?l||g||y?d||g||y?g||d||l?y||d||l?z||x||b?m||x||b||(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}else if(6==v){if(!d&&!x||!b&&!l||!y&&!z||!m&&!g||!d&&!b||!g&&!z||!x&&!l||!m&&!y||!d&&!m||!l&&!z||!x&&!g||!b&&!y){for(d||x?b||l?y||z?m||g?d||b?g||z?x||l?m||y?d||m?l||z?x||g?b||y||(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o),h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}else if(!d&&!z||!x&&!y||!b&&!g||!l&&!m){for(d||z?x||y?b||g?l||m||(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s,u[4][2]=o,u[5][0]=i,u[5][1]=s+1,u[5][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1,u[4][0]=i+1,u[4][1]=s+1,u[4][2]=o,u[5][0]=i,u[5][1]=s,u[5][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1,u[4][0]=i,u[4][1]=s,u[4][2]=o,u[5][0]=i+1,u[5][1]=s+1,u[5][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[3][0]=i,u[3][1]=s,u[3][2]=o+1,u[4][0]=i,u[4][1]=s+1,u[4][2]=o,u[5][0]=i+1,u[5][1]=s,u[5][2]=o),h=0;6>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[3][0]][u[3][1]][u[3][2]],n[u[4][0]][u[4][1]][u[4][2]],n[u[5][0]][u[5][1]][u[5][2]])),t.facenumber++}else if(!d&&!g||!x&&!m||!x&&!z||!l&&!g||!l&&!y||!b&&!z||!b&&!m||!d&&!y||!m&&!z||!g&&!y||!d&&!l||!x&&!b){for(d||g?x||m?x||z?l||g?l||y?b||z?b||m?d||y?m||z?g||y?d||l?x||b||(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[3][0]=i+1,u[3][1]=s,u[3][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[3][0]=i+1,u[3][1]=s,u[3][2]=o+1):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[3][0]=i,u[3][1]=s,u[3][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[3][0]=i,u[3][1]=s,u[3][2]=o+1):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[3][0]=i,u[3][1]=s+1,u[3][2]=o):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[3][0]=i,u[3][1]=s+1,u[3][2]=o+1):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o):(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[3][0]=i+1,u[3][1]=s+1,u[3][2]=o+1),h=0;4>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++,t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[2][0]][u[2][1]][u[2][2]],n[u[3][0]][u[3][1]][u[3][2]])),t.facenumber++}}else if(7==v){for(d?x?l?b?m?g?z?y||(u[0][0]=i,u[0][1]=s,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s+1,u[2][2]=o):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i+1,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o+1,u[1][0]=i,u[1][1]=s,u[1][2]=o+1,u[2][0]=i+1,u[2][1]=s,u[2][2]=o):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o+1,u[1][0]=i,u[1][1]=s+1,u[1][2]=o+1,u[2][0]=i,u[2][1]=s,u[2][2]=o):(u[0][0]=i+1,u[0][1]=s+1,u[0][2]=o,u[1][0]=i,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s+1,u[2][2]=o+1):(u[0][0]=i+1,u[0][1]=s,u[0][2]=o,u[1][0]=i,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s+1,u[2][2]=o+1):(u[0][0]=i,u[0][1]=s,u[0][2]=o,u[1][0]=i+1,u[1][1]=s+1,u[1][2]=o,u[2][0]=i+1,u[2][1]=s,u[2][2]=o+1):(u[0][0]=i,u[0][1]=s+1,u[0][2]=o,u[1][0]=i+1,u[1][1]=s,u[1][2]=o,u[2][0]=i,u[2][1]=s,u[2][2]=o+1),h=0;3>h;++h)-1==n[u[h][0]][u[h][1]][u[h][2]]&&(n[u[h][0]][u[h][1]][u[h][2]]=t.vertnumber,t.verts.push(new t.Vector3(u[h][0],u[h][1],u[h][2])),t.vertnumber++);t.faces.push(new t.Face3(n[u[0][0]][u[0][1]][u[0][2]],n[u[1][0]][u[1][1]][u[1][2]],n[u[2][0]][u[2][1]][u[2][2]])),t.facenumber++}}for(i=0;i<t.vertnumber;++i)t.verts[i].atomid=t.vp[t.verts[i].x*t.pWidth*t.pHeight+t.pHeight*t.verts[i].y+t.verts[i].z].atomid},this.laplaciansmooth=function(e){for(var i=new Array(t.vertnumber),r=0;r<t.vertnumber;++r)i[r]={x:0,y:0,z:0};for(var n,a=new Array(20),r=0;20>r;++r)a[r]=new Array(t.vertnumber);for(var r=0;r<t.vertnumber;++r)a[0][r]=0;for(var r=0;r<t.facenumber;++r){n=!0;for(var s=0;s<a[0][t.faces[r].a];++s)if(t.faces[r].b==a[s+1][t.faces[r].a]){n=!1;break}n&&(a[0][t.faces[r].a]++,a[a[0][t.faces[r].a]][t.faces[r].a]=t.faces[r].b),n=!0;for(var s=0;s<a[0][t.faces[r].a];++s)if(t.faces[r].c==a[s+1][t.faces[r].a]){n=!1;break}for(n&&(a[0][t.faces[r].a]++,a[a[0][t.faces[r].a]][t.faces[r].a]=t.faces[r].c),n=!0,s=0;s<a[0][t.faces[r].b];++s)if(t.faces[r].a==a[s+1][t.faces[r].b]){n=!1;break}for(n&&(a[0][t.faces[r].b]++,a[a[0][t.faces[r].b]][t.faces[r].b]=t.faces[r].a),n=!0,s=0;s<a[0][t.faces[r].b];++s)if(t.faces[r].c==a[s+1][t.faces[r].b]){n=!1;break}for(n&&(a[0][t.faces[r].b]++,a[a[0][t.faces[r].b]][t.faces[r].b]=t.faces[r].c),n=!0,s=0;s<a[0][t.faces[r].c];++s)if(t.faces[r].a==a[s+1][t.faces[r].c]){n=!1;break}for(n&&(a[0][t.faces[r].c]++,a[a[0][t.faces[r].c]][t.faces[r].c]=t.faces[r].a),n=!0,s=0;s<a[0][t.faces[r].c];++s)if(t.faces[r].b==a[s+1][t.faces[r].c]){n=!1;break}n&&(a[0][t.faces[r].c]++,a[a[0][t.faces[r].c]][t.faces[r].c]=t.faces[r].b)}for(var p=1,o=.5,v=(.75/(t.scaleFactor+3.5),0);e>v;++v){for(var r=0;r<t.vertnumber;++r)if(a[0][r]<3)i[r].x=t.verts[r].x,i[r].y=t.verts[r].y,i[r].z=t.verts[r].z;else if(3==a[0][r]||4==a[0][r]){for(i[r].x=0,i[r].y=0,i[r].z=0,s=0;s<a[0][r];++s)i[r].x+=t.verts[a[s+1][r]].x,i[r].y+=t.verts[a[s+1][r]].y,i[r].z+=t.verts[a[s+1][r]].z;i[r].x+=o*t.verts[r].x,i[r].y+=o*t.verts[r].y,i[r].z+=o*t.verts[r].z,i[r].x/=o+a[0][r],i[r].y/=o+a[0][r],i[r].z/=o+a[0][r]}else{i[r].x=0,i[r].y=0,i[r].z=0;for(var s=0;s<a[0][r];++s)i[r].x+=t.verts[a[s+1][r]].x,i[r].y+=t.verts[a[s+1][r]].y,i[r].z+=t.verts[a[s+1][r]].z;i[r].x+=p*t.verts[r].x,i[r].y+=p*t.verts[r].y,i[r].z+=p*t.verts[r].z,i[r].x/=p+a[0][r],i[r].y/=p+a[0][r],i[r].z/=p+a[0][r]}for(var r=0;r<t.vertnumber;++r)t.verts[r].x=i[r].x,t.verts[r].y=i[r].y,t.verts[r].z=i[r].z}},this.transformVertices=function(){for(var e=t.verts,i=1/t.scaleFactor,r=0;r<t.vertnumber;++r)e[r].x=e[r].x*i-t.ptranx,e[r].y=e[r].y*i-t.ptrany,e[r].z=e[r].z*i-t.ptranz},initparm(e.min,e.max,e.type>1),fillvoxels(e.atoms),buildboundary(),(4==e.type||2==e.type)&&fastdistancemap(),2==e.type&&(boundingatom(!1),fillvoxelswaals(e.atoms)),marchingcube(e.type),laplaciansmooth(1),transformVertices(),{verts:t.verts,faces:t.faces}};